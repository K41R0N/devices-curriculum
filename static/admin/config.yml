backend:
  name: github
  repo: K41R0N/devices-curriculum
  branch: main
  base_url: https://sveltia-cms-auth.alejandro-057.workers.dev

media_folder: static/images
public_folder: /images

slug:
  encoding: ascii
  clean_accents: true
  sanitize_replacement: '-'

collections:
  # Clusters - the thematic groupings of lessons
  - name: clusters
    label: Clusters
    label_singular: Cluster
    folder: content/clusters
    create: true
    slug: '{{slug}}'
    sortable_fields: ['order', 'title']
    fields:
      - { label: Title, name: title, widget: string }
      - { label: Slug, name: slug, widget: string }
      - { label: Order, name: order, widget: number, value_type: int, min: 1 }
      - { label: Description, name: description, widget: text }
      - { label: Overview, name: body, widget: markdown, required: false }

  # Lessons - the main content of the curriculum
  - name: lessons
    label: Lessons
    label_singular: Lesson
    folder: content/lessons
    create: true
    slug: '{{cluster}}-{{slug}}'
    sortable_fields: ['order', 'title', 'cluster']
    fields:
      - { label: Title, name: title, widget: string }
      - { label: Slug, name: slug, widget: string }
      - label: Cluster
        name: cluster
        widget: relation
        collection: clusters
        value_field: slug
        search_fields: ['title', 'slug']
        display_fields: ['title']
      - { label: Author, name: author, widget: string, required: false }
      - { label: Order, name: order, widget: number, value_type: int, min: 1 }
      - { label: Description, name: description, widget: text }
      - { label: Featured Image, name: featured_image, widget: image, required: false }
      - label: Learning Objectives
        name: objectives
        widget: list
        field: { label: Objective, name: objective, widget: string }
      - label: Key Concepts
        name: key_concepts
        widget: list
        fields:
          - { label: Concept Name, name: name, widget: string }
          - { label: Explanation, name: explanation, widget: markdown }
      - label: Assignment
        name: assignment
        widget: object
        fields:
          - { label: Instructions, name: instructions, widget: markdown }
          - { label: Reading URL, name: url, widget: string, required: false }
          - { label: Reading Title, name: reading_title, widget: string, required: false }
      - label: Knowledge Check
        name: knowledge_check
        widget: list
        fields:
          - { label: Question, name: question, widget: string }
          - { label: Hint, name: hint, widget: text, required: false }
      - label: Additional Resources
        name: additional_resources
        widget: list
        required: false
        fields:
          - { label: Title, name: title, widget: string }
          - { label: Author, name: author, widget: string, required: false }
          - { label: URL, name: url, widget: string, required: false }
          - { label: Description, name: description, widget: text }
      - { label: Introduction, name: body, widget: markdown }

  # Static pages
  - name: pages
    label: Pages
    files:
      - name: about
        label: About Page
        file: content/pages/about.md
        fields:
          - { label: Title, name: title, widget: string }
          - { label: Subtitle, name: subtitle, widget: string }
          - { label: Content, name: body, widget: markdown }
      - name: home
        label: Home Page
        file: content/pages/home.md
        fields:
          - { label: Hero Title, name: hero_title, widget: string }
          - { label: Hero Subtitle, name: hero_subtitle, widget: text }
          - { label: Approach Section, name: body, widget: markdown }

  # Site settings
  - name: settings
    label: Settings
    files:
      - name: site
        label: Site Settings
        file: content/settings/site.json
        fields:
          - { label: Site Title, name: title, widget: string }
          - { label: Site Description, name: description, widget: text }
          - { label: Author Name, name: author, widget: string }
          - { label: Substack URL, name: substack_url, widget: string }
          - { label: Footer Text, name: footer_text, widget: string }
